{# templates/home/index.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Liste des projets - TaskLinker{% endblock %}

{% block body %}
    <header>
        <div id="current-user"></div>
        <div id="title-page">
            <h1>Projets</h1>
        </div>
    </header>
    <div id="content">
        <div id="projects-container">
            {# On boucle sur la variable 'projects' passée par le contrôleur #}
            {% for project in projects %}
                <article class="card-project">
                    <a href="{{ path('project_show', {id: project.id}) }}">
                        <h2>{{ project.name }}</h2>
                    </a>
                    <div class="card-project-icons">
                        <a href="{{ path('project_edit', {id: project.id}) }}"><i class="fa-solid fa-pen"></i></a>

                        <form method="post" action="{{ path('project_archive', {id: project.id}) }}"
                              onsubmit="return confirm('Êtes-vous sûr de vouloir archiver ce projet ?\n\nIl ne sera plus accessible.');"
                              style="display: inline;">

                            <input type="hidden" name="_token" value="{{ csrf_token('archive' ~ project.id) }}">

                            <button type="submit" class="btn-icon">
                                <i class="fa-solid fa-trash"></i>
                            </button>
                        </form>
                    </div>
                </article>
            {% endfor %}

            <article class="card-project">
                <a href="{{ path('project_create') }}">
                    <i class="fa-solid fa-circle-plus add-project-icon"></i>
                    <h2>Ajouter un projet</h2>
                </a>
            </article>
        </div>
    </div>
{% endblock %}
